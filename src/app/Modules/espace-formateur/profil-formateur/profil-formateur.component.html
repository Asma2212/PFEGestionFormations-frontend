<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.1/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
</head>
<body >
  <div></div>
    <p-toast></p-toast>
    <div class="container" >
        <div class="row flex-lg-nowrap">
        
        
          <div class="col">
            <div class="row" >
              <div class="col mb-3" >
                <div class="card" >
                  <div class="card-body">
                    <div class="e-profile">
                      <div style="background: rgb(211, 211, 211);height: 10px;border-radius: 5px;"></div>
                      <div class="row" style="margin-left: 1%;">
                        <div class="col-12 col-sm-auto mb-3" >
                            <div *ngIf="!imgURL">
                          <div *ngFor="let file of fileInfos | async"> 
                                    <div *ngIf="testImage(file.type) && file.name == formateur.photo">
                                      <img [src]="file.url" height="140px" width="140px"/>
                                    </div>
                          </div></div>
                          <div *ngIf="imgURL">
                            <img  height="140px" width="140px" [src]="imgURL" alt="bbbbbb">
                          </div>
                        </div>
                        <div class="col d-flex flex-column flex-sm-row justify-content-between mb-3" >
                          <div class="text-center text-sm-left mb-2 mb-sm-0">
                            <h4 class="pt-sm-2 pb-1 mb-0 text-nowrap">{{formateur.lastName}} {{formateur.firstName}}</h4>
                            <p class="mb-0">{{formateur.email}}</p>
                            <div class="text-muted"><small>{{formateur.username}}</small></div>
                            <div class="mt-2">
                                <label class = "label-file" class="btn btn-primary" style="background: linear-gradient( rgb(183, 19, 19),rgba(185, 19, 19, 0.519));border: none;"> <i class="fa fa-fw fa-camera"></i> &nbsp;Changer Photo
                                    <input type="file" class="input-file" accept="image/*" (change)="onUpload($event)"/>
                                  </label>
                            </div>
                          </div>
                          <div class="text-center text-sm-right">
                            <span class="badge badge-secondary" style="font-size: 13px;">Formateur</span>
                            <div class="text-muted" style="font-size: 15px;"><small>{{formateur.etablissement}}</small></div>
                          </div>
                        </div>
                      </div>
                      <div style="background: rgb(211, 211, 211);height: 10px;border-radius: 5px;"></div>
                      <div class="tab-content pt-3">
                        <div class="tab-pane active">
                          <form class="form" novalidate="">
                            <div class="row">
                              <div class="col">
                                <div class="row">
                                  <div class="col">
                                    <div class="form-group">
                                      <label>Nom</label>
                                      <input class="form-control" type="text" name="name"  [(ngModel)]="formateur.lastName">
                                    </div>
                                  </div>
                                  <div class="col">
                                    <div class="form-group">
                                      <label>Prenom</label>
                                      <input class="form-control" type="text" name="username" [(ngModel)]="formateur.firstName">
                                    </div>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col">
                                    <div class="form-group">
                                      <label>Email</label>
                                      <input class="form-control" type="email" name="email" [(ngModel)]="formateur.email">
                                    </div>
                                  </div>
                                  <div class="col">
                                    <div class="form-group">
                                      <label>Numero Télephone</label><br>
                                      <p-inputMask  mask="99-999-999" [(ngModel)]="formateur.numTel" placeholder="99-999-999" name="tel" [style]="{height:'39px',width:'100%'}"></p-inputMask>
                                   
                                    </div>
                                  </div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                      <div class="form-group">
                                        <label>Date de naissance</label>
                                        <input class="form-control" type="date" name="dateNaiss" [(ngModel)]="formateur.dateNaiss">
                                      </div>
                                    </div>
                                    <div class="col">
                                      <div class="gender-details">
                                        <input type="radio" name="gender" id="dot-1" value="HOMME" [(ngModel)]="formateur.genre.name">
                                        <input type="radio" name="gender" id="dot-2" value="FEMME" [(ngModel)]="formateur.genre.name">
                                        <label for="gender">Genre</label>
                                        <div class="category">
                                          <label for="dot-1">
                                          <span class="dot one"></span>
                                          <span class="gender">&emsp;<i class="fa fa-solid fa-mars"></i> Homme </span>
                                        </label> 
                                        <label for="dot-2">
                                          <span class="dot two"></span>
                                          <span class="gender">&emsp;<i class="fa fa-solid fa-venus"></i> Femme </span>
                                        </label>
                                        </div>
                                      </div>
                                      </div>
                                  </div>
                                <div class="row">
                                  <div class="col mb-3">
                                    <div class="form-group">
                                      <label>A propos</label>
                                      <p-editor name="bio" [(ngModel)]="formateur.bio" [style]="{'height':'170px'}"></p-editor>       
                                    </div>
                                  </div>
                                </div>
                               
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-12 col-sm-6 mb-3">
                                <div class="mb-2"><b>Changer Mot de passe</b></div>
                                <div class="row">
                                  <div class="col">
                                    <div class="form-group">
                                      <label>Ancien Mot de passe</label>
                                      <input class="form-control" type="password" name="anc" placeholder="••••••" [(ngModel)]="ancPass">
                                      <small class="p-error block" *ngIf="!confAnc">Ancien mot de passe invalide</small>
                                    </div>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col">
                                    <div class="form-group">
                                      <label>Nouveau Mot de passe</label>
                                      <input class="form-control" type="password" name="pass" placeholder="••••••" [(ngModel)]="nouvPass" [disabled]="ancPass.trim() == ''">
                                      <small class="p-error block" *ngIf="!diffPass">Nouvelle mot de passe doit etre diffrente de l'ancienne</small>
                                    </div>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col">
                                    <div class="form-group">
                                      <label>Confirmer <span class="d-none d-xl-inline">Password</span></label>
                                      <input class="form-control" name="pass2" type="password" placeholder="••••••" [(ngModel)]="nouvPass2" [disabled]="nouvPass.trim() == ''"></div>
                                      <small class="p-error block" *ngIf="nouvPass != nouvPass2">Confirmation invalide</small>
                                  </div>
                                </div>
                              </div>
                              <div class="col-12 col-sm-5 offset-sm-1 mb-3">
                                <div class="mb-2"><b>Specialité(s)</b></div>
                                <div class="row">
                                  <div class="col">
                                    <div class="custom-controls-stacked px-2" *ngFor="let sp of formateur.lesSpecialites">
                                      <div class="custom-control custom-checkbox">
                                        <input type="checkbox" class="custom-control-input" id="notifications-blog" checked="">
                                        <label class="custom-control-label" for="notifications-blog">{{sp.titre}}</label>
                                      </div>
                                    </div>
                                  </div>
                                </div><br>
                                <div  class="row">
                                    <p-multiSelect [options]="specialites" [(ngModel)]="formateur.lesSpecialites" defaultLabel="Selectionner votre specialite" optionLabel="titre" display="chip" [style]="{maxWidth: '200px'}" name="spec" [style]="{width:'100%'}"></p-multiSelect>                                  
                                </div>
                                <div class="mb-2"><b>Etablissement</b></div>
                                <div class="row">
                                  <div class="col">
                                    <div class="custom-controls-stacked px-2">
                                      <div class="custom-control">
                                        <input class="form-control" type="etab" name="etab" [(ngModel)]="formateur.etablissement" style="margin-left:-49px ;">
                                      </div>
                                    </div>
                                  </div>
                                </div><br>
                                <div class="mb-2"><b>Curriculum Vitae</b></div>
                                <div class="row">
                                  <div class="col">
                                      <label class = "label-file"><i class="pi pi-external-link"></i> Ajouter CV format PDF
                                        <input type="file" class="input-file" accept="application/pdf" (change)="selectFile($event)"/>
                                      </label>
                                      <div *ngIf="formateur.cv">
                                        <p>{{formateur.cv}}</p>
                                      </div>
                      
                                      <button class="btn btn-success" [disabled]="!selectedFiles" (click)="upload()">
                                        Upload
                                      </button>
                                      <div *ngIf="currentFile" class="progress">
                                        <div
                                          class="progress-bar progress-bar-info progress-bar-striped"
                                          role="progressbar"
                                          attr.aria-valuenow="{{ progress }}"
                                          aria-valuemin="0"
                                          aria-valuemax="100"
                                          [ngStyle]="{ width: progress + '%' }">
                                          {{ progress }}%
                                        </div>
                                      </div>
                                      <div class="alert alert-light" role="alert" *ngIf="message != ''">{{ message }}</div>
                
                <br>
                                        
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col d-flex justify-content-end">
                                <button class="btn btn-primary" type="submit" (click)="saveChanges()" style="background: linear-gradient( rgb(183, 19, 19),rgba(185, 19, 19, 0.519));border: none;"><i class="fa fa-check"></i> Sauvegarder les modifications</button>
                              </div>
                            </div>
                          </form>
        
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
        
              <div class="col-12 col-md-3 mb-3" style="display: inline-block;">
                <div class="card mb-3">
                  <div class="card-body">
                    <div class="px-xl-3">
                      <button class="btn btn-block btn-secondary" (click)="deco()" style="background: linear-gradient( rgb(183, 19, 19),rgba(185, 19, 19, 0.519));color: white;">
                        <i class="fa fa-sign-out"></i>
                        <span>Deconnecter</span>
                      </button>
                    </div>
                  </div>
                </div>
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title font-weight-bold">Sessions de formation</h5>
                    <ul>
                        <li><strong> Passées :</strong> {{nbPasser}}</li>
                        <li><strong> En cours :</strong> {{nbEncours}} </li>
                        <li> <strong>A venir :</strong> {{nbAvenir}}</li>
                        <li><strong> Totale :</strong> {{nbPasser + nbAvenir}}</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
        
          </div>
        </div>
        </div> 
</body>
</html>
